<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Lab 8 - CI / CD Pipeline | Red Hat | Public Sector</title>

    
    
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly.min.css" />
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly-additions.min.css" />

    
    <link rel="stylesheet" href="/node_modules/highlight.js/styles/darkula.css" />

    
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/asciidoc.css" />
    <link rel="stylesheet" href="/css/custom.css" />
    
    <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery/dist/jquery.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/c3/c3.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/d3/d3.min.js"></script>

    
    
    <script src="/node_modules/patternfly/node_modules/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/drmonty-datatables-colvis/js/dataTables.colVis.js"></script>
    <script src="/node_modules/patternfly/node_modules/datatables.net-colreorder/js/dataTables.colReorder.js"></script>

    
    
    <script src="/node_modules/patternfly/dist/js/patternfly.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-combobox/js/bootstrap-combobox.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/moment/min/moment.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

    
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery-match-height/dist/jquery.matchHeight-min.js"></script>
    
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/clip.js"></script>
    
    <script src="/node_modules/highlight.js/lib/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body class="">
    

<nav class="navbar navbar-default navbar-inverse navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        <img src="/img/brand.png" alt="Red Hat | Public Sector" />
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        
          
            <li>
              <a href="/">Home</a>
            </li>
          
        
          
            <li>
              <a href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a href="/contact/">Contact</a>
            </li>
          
        
          
            <li>
              <a href="/events/">Events</a>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Workshops <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/agile_integrations_ci/">Agile Integrations Workshop - Citizen Integrator</a>
                  </li>
                
                  <li>
                    <a href="/workshops/agile_integrations_dev/">Agile Integrations Workshop - Developer</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower/">Ansible Tower Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower_azure/">Ansible Tower Workshop on Azure</a>
                  </li>
                
                  <li>
                    <a href="/workshops/cloudforms41/">CloudForms Workshops</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_containers/">Container Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/containers_101/">Containers 101 Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/secure_software_factory/">DevSecOps Workshop - Secure Software Factory</a>
                  </li>
                
                  <li>
                    <a href="/workshops/example/">Example Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/jdv_dev/">JBoss Data Virtualization Development</a>
                  </li>
                
                  <li>
                    <a href="/workshops/strangling_the_monolith/">Microservices Workshop - Strangling the Monolith</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_101_dcmetromap/">OpenShift 101 - DC Metro Map Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_install/">OpenShift Install</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_openshift/">OpenShift Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/rhosp_101/">Red Hat OpenStack Platform 101</a>
                  </li>
                
                  <li>
                    <a href="/workshops/source_to_image/">Source to Image</a>
                  </li>
                
              </ul>
            </li>
          
        
      </ul>
    </div>
  </div>
</nav>



<div class="jumbotron jumbotron-page text-center">
  <h1>Lab 8 - CI / CD Pipeline</h1>
</div>

<div class="container">
  <div class="row">
    <p class="text-center">
      
      <a href="http://redhatgov.io/workshops/openshift_101_dcmetromap">Return to Workshop</a>
    </p>
    
    







<nav>
  <ul class="pager">
    
      <li class="previous">
        <a href="http://redhatgov.io/workshops/openshift_101_dcmetromap/lab7-labels/">&larr; Previous: Lab 7 - Labels</a>
      </li>
    
    
      <li class="next">
        <a href="http://redhatgov.io/workshops/openshift_101_dcmetromap/lab9-bluegreen/">Next: Lab 9 - Blue | Green Deployment &rarr;</a>
      </li>
    
  </ul>
</nav>


    

<h1 id="ci-cd-defined">CI/CD Defined</h1>

<p>In modern software projects many teams utilize the concept of Continuous Integration (CI) and Continuous Delivery (CD). By setting up a tool chain that continuously builds, tests, and stages software releases, a team can ensure that their product can be reliably released at any time. OpenShift can be an enabler in the creation and management of this tool chain.</p>

<p>In this lab we walk through creating a simple example of a CI/CD <a href="https://jenkins.io/doc/book/pipeline/">pipeline</a> utlizing Jenkins, all running on top of OpenShift! The Jenkins job will trigger OpenShift to build and deploy a test version of the application, validate that the deployment works, and then tag the test version into production.</p>

<blockquote>
<p>In the steps below replace 'YOUR#' with your student number (if applicable).</p>
</blockquote>

<h2 id="create-a-new-project">Create a new project</h2>

<p>Create a new project named “cicd-<span class="userid">YOUR#</span>
”.</p>

<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapseac29c26e94dfd9555c442d68e87c55d0" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapseac29c26e94dfd9555c442d68e87c55d0" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <h2 id="create-the-project-cicd-span-class-userid-your-span">Create the project cicd-<span class="userid">YOUR#</span></h2>

<p><code>
$ oc new-project cicd-<span class="userid">YOUR#</span></p>

<p></code></p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsef4190da377b45206e420f545decd18c1" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsef4190da377b45206e420f545decd18c1" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Browse to original landing page by clicking by "OpenShift Container Platform" in the top left hand corner
</blockquote>

<p><img src="../images/ocp-lab-cicd-new-project-landing.png" width="300"><br/></p>

<blockquote>
click "Create Project".
</blockquote>

<p><img src="../images/ocp-lab-cicd-new-project.png" width="400"><br/></p>

<p><blockquote>
Fill in the Name and Display Name of the project as &quot;cicd-<span class="userid">YOUR#</span>
&quot; and click &quot;Create&quot;
</blockquote>
<img src="../images/ocp-lab-cicd-new-project-detail.png" width="500"><br/></p>

    </div>
  </div>
</div>



</div>


<h2 id="use-the-cicd-hahahugoshortcode-3hbhb-project">Use the cicd-<span class="userid">YOUR#</span>
 project</h2>

<pre><code class="language-bash">$ oc project cicd-<span class="userid">YOUR#</span>

</code></pre>

<h2 id="instantiate-a-jenkins-server-in-your-project">Instantiate a Jenkins server in your project</h2>

<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse0f13e2227d97f198cf50ed49322c5a12" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse0f13e2227d97f198cf50ed49322c5a12" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <pre><code class="language-bash">$ oc new-app jenkins-ephemeral
</code></pre>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsee183cd971fd5897f5f8a1670dfc2411b" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsee183cd971fd5897f5f8a1670dfc2411b" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Click "Add to Project", select "Browse Catalog" tab and search on "jenkins". Then select "Jenkins (Ephemeral)".
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-instantiate.png" width="600"><br/></p>

<p><img src="../images/ocp-lab-cicd-jenkins-instantiate1.png" width="700"><br/></p>

<blockquote>
Select Next
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-instantiate2.png" width="700"><br/></p>

<blockquote>
Select the Project cicd-<span class="userid">YOUR#</span>
 from "Add to Project"
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-instantiate3.png" width="700"><br/></p>

<blockquote>
Select the Create
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-instantiate4.png" width="700"><br/></p>

<blockquote>
Click the "Continue to the project overview" link
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-overview.png" width="900"><br/></p>

    </div>
  </div>
</div>



</div>


<h2 id="create-a-sample-application-configuration">Create a sample application configuration</h2>

<blockquote>
<p>Use the &quot;oc new-app&quot; command to create a simple nodejs application from a template file:</p>
</blockquote>

<pre><code class="language-bash">$ oc new-app -f https://raw.githubusercontent.com/openshift/origin/master/examples/jenkins/application-template.json
</code></pre>

<blockquote>
<p>Click on &quot;Overview&quot; within the OpenShift console to display the sample application configuration</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-app-create.png" width="900"><br/></p>

<h2 id="confirm-you-can-access-jenkins">Confirm you can access Jenkins</h2>

<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsea01251ed122169c613600bffd1e70c16" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsea01251ed122169c613600bffd1e70c16" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
<i class="fa fa-terminal"></i> Get the route to the Jenkins server. Your HOST/PORT values will differ 
from the example below.
</blockquote>

<pre><code class="language-bash">$ oc get route
NAME       HOST/PORT                            PATH      SERVICES   PORT      TERMINATION     WILDCARD
frontend   frontend-cicd.192.168.42.27.xip.io             frontend   &lt;all&gt;     edge            None
jenkins    jenkins-cicd.192.168.42.27.xip.io              jenkins    &lt;all&gt;     edge/Redirect   None
</code></pre>

<p>Use Jenkins HOST/PORT to access through web browser</p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse9b218cdeb1d564c9e51f113e7f7d7c45" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse9b218cdeb1d564c9e51f113e7f7d7c45" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Click the URL that is listed in the jenkins header
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-overview.png" width="900"><br/></p>

    </div>
  </div>
</div>



</div>


<blockquote>
<p>Select &quot;Login with OpenShift&quot; from Jenkins login page</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-login-1.png" width="400">
</br></p>

<p>The OpenShift login page is displayed in a new browser tab.</p>

<blockquote>
<p>Login with your OpenShift user name and password</p>
</blockquote>

<p><img src="../images/ocp-login.png" width="600">
<br/></p>

<p>Once logged in, click the [Allow selected permissions] button and you should see the Jenkins dashboard.</p>

<h2 id="create-a-jenkins-pipeline-using-openshift">Create a Jenkins pipeline using OpenShift</h2>

<p>We will be creating the following very simple (4) stage Jenkins pipeline.</p>

<ol>
<li>Build the application from source.</li>
<li>Deploy the test version of the application.</li>
<li>Submit for approval, then tag the image for production, otherwise abort.</li>
<li>Scale the application.</li>
</ol>

<p>The first step is to create a build configuration that is based on a Jenkins pipeline strategy. The pipeline is written
in the GROOVY language using a Jenkins file format.</p>

<blockquote>
<p>Use the OpenShift CLI or Web Console to create an OpenShift build configuration object.</p>
</blockquote>

<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsea5c11fbfea212da3b3877178bd0be1d0" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsea5c11fbfea212da3b3877178bd0be1d0" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>Copy and paste the following into bash.</p>

<pre><code class="language-bash">oc create -f - &lt;&lt;EOF
kind: &quot;BuildConfig&quot;
apiVersion: &quot;v1&quot;
metadata:
  name: &quot;pipeline&quot;
spec:
  strategy:
    jenkinsPipelineStrategy:
      jenkinsfile: |-
        node() {
          stage 'buildFrontEnd'
          openshiftBuild(buildConfig: 'frontend', showBuildLogs: 'true')
  
          stage 'deployFrontEnd'
          openshiftDeploy(deploymentConfig: 'frontend')
  
          stage &quot;promoteToProd&quot;
          input message: 'Promote to production ?', ok: '\'Yes\''
          openshiftTag(sourceStream: 'origin-nodejs-sample', sourceTag: 'latest', destinationStream: 'origin-nodejs-sample', destinationTag: 'prod')
  
          stage 'scaleUp'
          openshiftScale(deploymentConfig: 'frontend-prod',replicaCount: '2')
        }
EOF
</code></pre>

<p>Expected output:</p>

<pre><code class="language-bash">buildconfig &quot;pipeline&quot; created
</code></pre>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsec11283b61e8b114c741791e2ccb0c295" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsec11283b61e8b114c741791e2ccb0c295" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
<p>Use the following OpenShift build configuration to create the pipeline.</p>
</blockquote>

<pre><code class="language-bash">kind: &quot;BuildConfig&quot;
apiVersion: &quot;v1&quot;
metadata:
  name: &quot;pipeline&quot;
spec:
  strategy:
    jenkinsPipelineStrategy:
      jenkinsfile: |-
        node() {
          stage 'buildFrontEnd'
          openshiftBuild(buildConfig: 'frontend', showBuildLogs: 'true')
  
          stage 'deployFrontEnd'
          openshiftDeploy(deploymentConfig: 'frontend')
  
          stage &quot;promoteToProd&quot;
          input message: 'Promote to production ?', ok: '\'Yes\''
          openshiftTag(sourceStream: 'origin-nodejs-sample', sourceTag: 'latest', destinationStream: 'origin-nodejs-sample', destinationTag: 'prod')
  
          stage 'scaleUp'
          openshiftScale(deploymentConfig: 'frontend-prod',replicaCount: '2')
        }
</code></pre>

<blockquote>
<p>Choose <em>Add to project</em> -&gt; <em>Import YAML</em></p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-import-yaml.png" width="900"></p>

<blockquote>
<p>Then copy and paste the above build configuration definition and choose &quot;Create&quot;.</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-import-yaml-dialog.png"></p>

    </div>
  </div>
</div>



</div>


<h2 id="start-the-pipeline">Start the pipeline</h2>

<blockquote>
<p>Using the OpenShift Web Console, choose <em>Builds</em> -&gt; <em>Pipelines</em></p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-start-pipeline.png" width="900"></p>

<p>When the pipeline starts, OpenShift uploads the pipeline to the Jenkins server for execution. As it runs, the various stages trigger OpenShift to build and deploy the frontend microservice. After a Jenkins user approves the frontend deployment, Jenkins triggers OpenShift to tag the image stream with the &quot;:prod&quot; tag then scales the frontend-prod deployment for (2) replicas.</p>

<p>The Jenkins dashboard should indicate that a new build is executing.</p>

<p><img src="../images/ocp-lab-cicd-jenkins-build-exec-status.png"></p>

<p>Back in the OpenShift Web Console, watch the pipeline execute. Once the &quot;deployFrontEnd&quot; stage completes, you should be able to visit the route for the frontend service in a web browser.</p>

<p><img src="../images/ocp-lab-cicd-pipeline-input.png"></p>

<blockquote>
<p>Click on &quot;Input Required&quot; and you should get redirected to the Jenkins Web Console to
approve the promotion to production.</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-promote.png"></p>

<blockquote>
<p>Now return to the OpenShift Web Console and watch the pipeline finish.</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-pipeline-stages.png"></p>

<blockquote>
<p>Confirm the <em>frontend-prod</em> has deployed 2 pods.</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-create-route.png"></p>

<blockquote>
<p>Now <em>create a secure route</em> with TLS edge termination the <em>frontend-prod</em> service so the application can be visited.</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-route-tls.png"></p>

<h2 id="confirm-both-the-test-and-production-services-are-available">Confirm both the test and production services are available</h2>

<blockquote>
<p>Browse to both services</p>
</blockquote>

<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse2766920c3cd638ef17c9d8cb2e647556" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse2766920c3cd638ef17c9d8cb2e647556" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>Use the <code>oc get routes</code> command to get the HOST/PORT (URLs) needed to access the frontend and frontend-prod services. Your HOST/PORT values will differ
from the example below.</p>

<pre><code class="language-bash">$ oc get routes

NAME            HOST/PORT                            PATH      SERVICES        PORT      TERMINATION     WILDCARD
frontend        frontend-cicd-XX.apps.eadgbe.net                  frontend        &lt;all&gt;     edge            None
frontend-prod   frontend-prod-cicd-XX.apps.eadgbe.net             frontend-prod   web       edge            None
</code></pre>

<p>Use a web browser to visit the HOST/PORT (URLs) for the frontend and frontend-prod services. Don't forget the <code>https://</code> prefix.</p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse45211b710ff2818b59a2bad89681b486" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse45211b710ff2818b59a2bad89681b486" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
Select services' links from Overview page.
</blockquote>

<p><img src="../images/ocp-lab-cicd-jenkins-app-overview.png"><br/></p>

    </div>
  </div>
</div>



</div>


<p>Service web page displayed:</p>

<p><img src="../images/ocp-lab-cicd-app-test.png"><br/></p>

<h2 id="edit-the-pipeline">Edit the pipeline.</h2>

<blockquote>
<p>Now make a change to the pipeline. For example, in the <em>scaleUp</em> stage, change the number
of replicas to 3.</p>
</blockquote>

<p>Technically speaking, a rebuild from source is not needed to scale up a deployment. We use
this simple example to illustrate how a pipeline may be edited within OpenShift.</p>

<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse77ce4ebdbd4b35bef7077ef551e536a8" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse77ce4ebdbd4b35bef7077ef551e536a8" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>If you are comfortable using the <strong>vi</strong> editor:</p>

<pre><code class="language-bash">oc edit bc/pipeline
</code></pre>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse5c32d00d6332e981fc83f3566add305c" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse5c32d00d6332e981fc83f3566add305c" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p><img src="../images/ocp-lab-cicd-pipeline-edit.png"></p>

    </div>
  </div>
</div>



</div>


<blockquote>
<p>Save your changes and run the pipeline again to confirm the <em>frontend-prod</em> deployment has
deployed 3 pods.</p>
</blockquote>

<p><img src="../images/ocp-lab-cicd-app-3-pods.png"></p>

<h1 id="summary">Summary</h1>

<p>In this lab you have very quickly and easily constructed a basic Build/Test/Deploy pipeline. Although our example was very basic it introduces you to a powerful DevOps feature of OpenShift through the leveraging of Jenkins. This can be extended to support complex real-world continuous delivery requirements. Read more about the use of Jenkins on OpenShift <a href="https://docs.openshift.com/enterprise/latest/using_images/other_images/jenkins.html">here</a> and more about Jenkins <a href="https://jenkins.io/doc">here</a>.</p>

<hr>
<h3>Workshop Details</h3>
<div class="row">
  <div class="col-lg-4 col-md-5 col-sm-12" id="workshopFooterDetails">
    <table>
      <tr>
        <td class="text-right"><b>Domain</b></td>
        <td><span class="domain"></span></td>
        <td rowspan="3">
          <img src="https://www.redhat.com/files/brand/email/sig-redhat.png" alt="Red Hat Logo" />
        </td>
      </tr>
      <tr>
        <td class="text-right"><b>Workshop</b></td>
        <td><span class="prefix"></span></td>
      </tr>
      <tr>
        <td class="text-right"><b>Student ID</b></td>
        <td><span class="userid"></span></td>
      </tr>
    </table>
  </div>
  <div class="col-lg-8 col-md-7 col-sm-12">
    <form id="footerForm" onsubmit="return false;" class="row" style="padding: 1.75rem 0 0 0;">
      <div class="form-group col-sm-6 col-md-6 col-lg-2">
        <label for="userid">Student ID</label>
        <select id="userid" name="userid" class="form-control">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
          <option value="32">32</option>
          <option value="33">33</option>
          <option value="34">34</option>
          <option value="35">35</option>
          <option value="36">36</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
          <option value="44">44</option>
          <option value="45">45</option>
          <option value="46">46</option>
          <option value="47">47</option>
          <option value="48">48</option>
          <option value="49">49</option>
          <option value="50">50</option>
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-4">
        <label for="domain">Domain</label>
        <select id="domain" name="domain" class="form-control">
          <option value="redhatgov.io">redhatgov.io</option>
          <option value="az.redhatgov.io">az.redhatgov.io</option>
          <option value="redhat-fierce.io">redhat-fierce.io</option>
          <option value="fiercesw.network">fiercesw.network</option>
          <option value="rhtps.io">rhtps.io</option>
          <option value="openshiftworkshop.com">openshiftworkshop.com</option>          
          <option value="redhatpsmwsa.com">redhatpsmwsa.com</option>          
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <label for="prefix">Workshop</label>
        <input id="prefix" name="prefix" type="text" size="16" class="form-control" placeholder="example" />
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <button type="submit" class="btn btn-primary form-control" style="margin-bottom:1rem;">Enter</button>
        <button type="reset" class="btn btn-default form-control">Default</button>
      </div>
    </form>
  </div>
</div>

<hr>

<script type="text/javascript" src="/node_modules/js-cookie/src/js.cookie.js"></script>
<script type="text/javascript">
<!--
  
  var Cookies2 = Cookies.noConflict();

  var cookiePathArr = cleanArray(window.location.pathname.split('/'));
  var cookiePath = '/' + cookiePathArr[0] + '/' + cookiePathArr[1] + '/';

  function cleanArray(actual) {
    var newArray = new Array();
    for (var i = 0; i < actual.length; i++) {
      if (actual[i]) {
        newArray.push(actual[i]);
      }
    }
    return newArray;
  }
  function replaceClassText() {
    jQuery("span.domain").html(Cookies2.get("domain"));
    jQuery("span.userid").html(Cookies2.get("userid"));
    jQuery("span.prefix").html(Cookies2.get("prefix"));
  }
  function pageLoadWorkshopFooterTest() {
    
    if (Cookies2.get("domain") === undefined) {
      resetWorkshopFooter();
    }
    else {
      replaceClassText();
      setWorkshopFooterInputValues()
    }
  }
  function setWorkshopFooterData() {
    
    Cookies2.set("domain", jQuery("select#domain").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("userid", jQuery("select#userid").val(), { path: cookiePath, expires: 7 } );
    replaceClassText();
  }
  function setWorkshopFooterInputValues() {
    jQuery("select#domain").val(Cookies2.get("domain"));
    jQuery("input#prefix").val(Cookies2.get("prefix"));
    jQuery("select#userid").val(Cookies2.get("userid"));
  }
  function resetWorkshopFooter() {
    
    jQuery("select#domain, select#userid").prop("selectedIndex", 0);
    jQuery("input#prefix").val(jQuery("input#prefix").attr('placeholder'));
    
    Cookies2.set("domain", jQuery("select#domain option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("userid", jQuery("select#userid option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    
    
    replaceClassText();
  }

  jQuery(document).ready(function() {
    pageLoadWorkshopFooterTest();

    jQuery("form#footerForm").submit(function() {
      setWorkshopFooterData();
      return false; 
    });

    jQuery("form#footerForm").bind("reset", function() {
      resetWorkshopFooter();
      return true;
    });

    return false;
  });
-->
</script>




    







<nav>
  <ul class="pager">
    
      <li class="previous">
        <a href="http://redhatgov.io/workshops/openshift_101_dcmetromap/lab7-labels/">&larr; Previous: Lab 7 - Labels</a>
      </li>
    
    
      <li class="next">
        <a href="http://redhatgov.io/workshops/openshift_101_dcmetromap/lab9-bluegreen/">Next: Lab 9 - Blue | Green Deployment &rarr;</a>
      </li>
    
  </ul>
</nav>


    <p class="text-center">
      
      <a href="http://redhatgov.io/workshops/openshift_101_dcmetromap">Return to Workshop</a>
    </p>
  </div>
</div>

    <div id="page-footer" class="container">
      <p class="text-center">
        Copyright &copy; 2019 Red Hat, Inc.
      </p>
    </div>
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
  </body>
</html>

