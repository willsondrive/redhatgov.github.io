<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Lab 03 - Fuse Online | Red Hat | Public Sector</title>

    
    
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly.min.css" />
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly-additions.min.css" />

    
    <link rel="stylesheet" href="/node_modules/highlight.js/styles/darkula.css" />

    
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/asciidoc.css" />
    <link rel="stylesheet" href="/css/custom.css" />
    
    <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery/dist/jquery.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/c3/c3.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/d3/d3.min.js"></script>

    
    
    <script src="/node_modules/patternfly/node_modules/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/drmonty-datatables-colvis/js/dataTables.colVis.js"></script>
    <script src="/node_modules/patternfly/node_modules/datatables.net-colreorder/js/dataTables.colReorder.js"></script>

    
    
    <script src="/node_modules/patternfly/dist/js/patternfly.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-combobox/js/bootstrap-combobox.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/moment/min/moment.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

    
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery-match-height/dist/jquery.matchHeight-min.js"></script>
    
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/clip.js"></script>
    
    <script src="/node_modules/highlight.js/lib/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body class="">
    

<nav class="navbar navbar-default navbar-inverse navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        <img src="/img/brand.png" alt="Red Hat | Public Sector" />
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        
          
            <li>
              <a href="/">Home</a>
            </li>
          
        
          
            <li>
              <a href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a href="/contact/">Contact</a>
            </li>
          
        
          
            <li>
              <a href="/events/">Events</a>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Workshops <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/agile_integrations_ci/">Agile Integrations Workshop - Citizen Integrator</a>
                  </li>
                
                  <li>
                    <a href="/workshops/agile_integrations_dev/">Agile Integrations Workshop - Developer</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower/">Ansible Tower Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower_azure/">Ansible Tower Workshop on Azure</a>
                  </li>
                
                  <li>
                    <a href="/workshops/cloudforms41/">CloudForms Workshops</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_containers/">Container Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/containers_101/">Containers 101 Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/secure_software_factory/">DevSecOps Workshop - Secure Software Factory</a>
                  </li>
                
                  <li>
                    <a href="/workshops/example/">Example Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/jdv_dev/">JBoss Data Virtualization Development</a>
                  </li>
                
                  <li>
                    <a href="/workshops/strangling_the_monolith/">Microservices Workshop - Strangling the Monolith</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_101_dcmetromap/">OpenShift 101 - DC Metro Map Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_install/">OpenShift Install</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_openshift/">OpenShift Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/rhosp_101/">Red Hat OpenStack Platform 101</a>
                  </li>
                
                  <li>
                    <a href="/workshops/source_to_image/">Source to Image</a>
                  </li>
                
              </ul>
            </li>
          
        
      </ul>
    </div>
  </div>
</nav>



<div class="jumbotron jumbotron-page text-center">
  <h1>Lab 03 - Fuse Online</h1>
</div>

<div class="container">
  <div class="row">
    <p class="text-center">
      
      <a href="http://redhatgov.io/workshops/agile_integrations_ci">Return to Workshop</a>
    </p>
    
    







<nav>
  <ul class="pager">
    
      <li class="previous">
        <a href="http://redhatgov.io/workshops/agile_integrations_ci/lab02/">&larr; Previous: Lab 02 - API Mocking</a>
      </li>
    
    
      <li class="next">
        <a href="http://redhatgov.io/workshops/agile_integrations_ci/lab04/">Next: Lab 04 - Managing API Endpoints &rarr;</a>
      </li>
    
  </ul>
</nav>


    

<h1 id="lab-3">Lab 3</h1>

<h2 id="fuse-online">Fuse Online</h2>

<ul>
<li>Duration: 20 mins</li>
<li>Audience: Developers and Architects</li>
</ul>

<p><br><img src="../images/agenda-03.png "Login" width="900" /><br><br></p>

<h2 id="overview">Overview</h2>

<p>When it comes to quick API development, you need both the integration experts as well as application developers to easily develop and deploy the APIs. Here is how to create a simple API with Fuse Online.</p>

<h3 id="why-red-hat">Why Red Hat?</h3>

<p>Red Hat Fuse integration solution empowers integration experts, application developers, and business users to engage in enterprise-wide collaboration and high-productivity self-service.</p>

<h2 id="lab-instructions">Lab Instructions</h2>

<h3 id="step-1-create-database-connection">Step 1: Create database connection</h3>

<ol>
<li><p>Navigate to OpenShift.</p></li>

<li><p>Click on your Tools Project.</p></li>

<li><p>Click on your Fuse Online Route and Log In.</p></li>

<li><p>The first time that you hit the Fuse Online URL, you will be presented with an <em>Authorize Access</em> page.  Click the <strong>Allow selected permissions</strong> button to accept the defaults.</p>

<p><br><img src="../images/design-54.png "Accept permissions" width="900" /><br><br></p></li>

<li><p>Click on <strong>Connections &gt; Create Connection</strong></p>

<p><br><img src="../images/00-create-connection.png "Create Connection" width="900" /><br><br></p></li>

<li><p>Select <strong>Database</strong></p>

<p><br><img src="../images/01-select-database.png "Select Database" width="900" /><br><br></p></li>

<li><p>Enter below values for Database Configuration</p>

<pre><code>Connection URL: jdbc:postgresql://postgresql.OCPPROJECT.svc:5432/sampledb
Username      : dbuser
Password      : password
Schema        : &lt;blank&gt;
</code></pre>

<p><em>Remember to replace the OCPPROJECT with the OpenShift project(NameSpace) you used in last lab.  It should be your username</em></p></li>

<li><p>Click <strong>Validate</strong> and verify if the connection is successful. Click <strong>Next</strong> to proceed.</p>

<p><br><img src="../images/02-click-validate.png "Validate" width="900" /><br><br></p></li>

<li><p>Add Connection details:</p>

<ul>
<li>Connection Name: LocationDB</li>
<li>Description: Location Database</li>
<li>Click <strong>Create</strong>.</li>
</ul>

<p><br><img src="../images/03-connection-details.png "Add Connection Details" width="900" /><br><br></p></li>

<li><p>Verify that the Location Database is successfully created.</p></li>
</ol>

<h3 id="step-2-create-webhook-integration">Step 2: Create webhook integration</h3>

<p>Description goes here</p>

<ol>
<li><p>Click on <strong>Integrations &gt; Create Integration</strong></p>

<p><br><img src="../images/04-create-integration.png "Create Integration" width="900" /><br><br></p></li>

<li><p>Choose <strong>Webhook</strong></p>

<p><br><img src="../images/05-choose-weebhook.png "Choose webhook"Integration" width="900" /><br><br></p></li>

<li><p>Click on Incoming webhook</p>

<p><br><img src="../images/06-incoming-webhook.png "Add incoming webhook" width="900" /><br><br></p></li>

<li><p>It navigates to the Webhook Token screen. Click <strong>Next</strong></p>

<p><br><img src="../images/07-webhook-configuration.png "Webhook Configuration" width="900" /><br><br></p></li>

<li><p>Define the Output Data Type.</p>

<ul>
<li>Select type from the dropdown as JSON instance.</li>
<li>Enter Data type Name: Custom</li>
<li>For Definition:, copy below JSON data.</li>
<li>Click Done</li>
</ul>

<pre><code>{
  &quot;id&quot;: 1,
  &quot;name&quot;: &quot;Kamarhati&quot;,
  &quot;type&quot;: &quot;Regional Branch&quot;,
  &quot;status&quot;: &quot;1&quot;,
  &quot;location&quot;: {
    &quot;lat&quot;: &quot;-28.32555&quot;,
    &quot;lng&quot;: &quot;-5.91531&quot;
  }
}
</code></pre>

<p><br> <br> <img src="../images/08-data-type.png "Data Type" width="900" /><br><br></p></li>

<li><p>Click on LocationDB from the catalog and then select Invoke SQL</p>

<p><br><img src="../images/09-invoke-sql.png "Invoke SQL" width="900" /><br><br></p></li>

<li><p>Enter the SQL statement and click <strong>Done</strong>.</p>

<pre><code>INSERT INTO locations (id,name,lat,lng,location_type,status) VALUES (:#id,:#name,:#lat,:#lng,:#location_type,:#status )
</code></pre>

<p><br><img src="../images/10-invoke-sql-2.png "Invoke SQL 2" width="900" /><br><br></p></li>

<li><p>Click on Add step and select Data mapper</p>

<p><br><img src="../images/11-data-mapper.png "Data Mapper" width="900" /><br><br></p></li>

<li><p>Drag and drop the matching <strong>Source</strong> Data types to all their corresponding <strong>Targets</strong> as per the following screenshot. When finished, click <strong>Done</strong>.</p>

<p><br><img src="../images/12-configure-mapper.png "Configure Mapper" width="900" /><br><br></p></li>

<li><p>Click <strong>Publish</strong> on the next screen</p></li>

<li><p>Add Integration Name: addLocation.</p></li>

<li><p>Again Click <strong>Publish</strong>.</p>

<p><br><img src="../images/13-publish-integration.png "Publish Integration" width="900" /><br><br></p></li>
</ol>

<p><em>Congratulations</em>. You successfully published the integration. (Wait for few minutes to for the integration to be built and published)</p>

<h3 id="step-3-create-a-post-request">Step 3: Create a POST request</h3>

<p>We will use an online cURL tool to create the 101st record field in database.  If you'd prefer to use the Terminal in your Che instance, go ahead and skip the online cURL instructions and just use the cURL command in your Che Terminal.</p>

<ol>
<li><p>Copy the External URL per the below screenshot</p>

<p><br><img src="../images/14-copy-URL.png "Copy URL" width="900" /><br><br></p></li>

<li><p>Open a browser window and navigate to: <a href="https://onlinecurl.com/">https://onlinecurl.com/</a></p></li>

<li><p>Below are the values for the request.</p>

<ul>
<li>Past the URL you just copied for the curl command</li>
<li>Click &quot;+ ADD Option&quot; 3 times

<ul>
<li>for --request (x) enter:

<ul>
<li>POST</li>
</ul></li>
<li>for --data (-d) enter:

<ul>
<li>{&quot;id&quot;: 101, &quot;name&quot;: &quot;Kamarhati&quot;, &quot;type&quot;: &quot;Regional Branch&quot;, &quot;status&quot;: &quot;1&quot;, &quot;location&quot;: { &quot;lat&quot;: &quot;-28.32555&quot;, &quot;lng&quot;: &quot;-5.91531&quot; }}</li>
</ul></li>
<li>for --header (-H)

<ul>
<li>Content-Type: application/json</li>
</ul></li>
</ul></li>
<li>Note: id:101 in the payload as we are creating 101th record in the database.</li>
<li>Click START YOUR CURL

<ul>
<li>URL: <a href="https://i-addlocation-fuse-18308937-d7b6-11e8-96c6-0a580a810006.apps.ocp-ai.redhatgov.io/webhook/4dTcVchE8evWz3dVvtHFK3wvfFbFzpVLPEMq1TkcF0MGIbJmu4">https://i-addlocation-fuse-18308937-d7b6-11e8-96c6-0a580a810006.apps.ocp-ai.redhatgov.io/webhook/4dTcVchE8evWz3dVvtHFK3wvfFbFzpVLPEMq1TkcF0MGIbJmu4</a></li>
<li>--header (-H):  Content-Type: application/json</li>
<li>--data (-d): {&quot;id&quot;: 101, &quot;name&quot;: &quot;Kamarhati&quot;, &quot;type&quot;: &quot;Regional Branch&quot;, &quot;status&quot;: &quot;1&quot;, &quot;location&quot;: { &quot;lat&quot;: &quot;-28.32555&quot;, &quot;lng&quot;: &quot;-5.91531&quot; }}</li>
<li>--request (-X): POST</li>
</ul></li>
</ul>

<p><br><img src="../images/15-online-curl.png "Online URL" width="900" /><br><br></p></li>

<li><p>The page will load the 204 response information from the service which means the request was successfully fulfilled.</p>

<ul>
<li>If you get an SSL error, please see the next step.</li>
</ul>

<p><br><img src="../images/16-response-header.png "Response Header" width="900" /><br><br></p></li>

<li><p>If you are using an Environment with self signed certificates and get an SSL error, you can also use the curl utility in the terminal of your Eclipse Che environment instead of online curl.</p>

<ul>
<li>Please make sure to use the your URL you copied and pasted</li>
</ul>

<pre><code>curl -k \
--header &quot;Content-Type: application/json&quot; \
--request POST \
--data '{&quot;id&quot;: 101, &quot;name&quot;: &quot;Kamarhati&quot;, &quot;type&quot;: &quot;Regional Branch&quot;, &quot;status&quot;: &quot;1&quot;, &quot;location&quot;: { &quot;lat&quot;: &quot;-28.32555&quot;, &quot;lng&quot;: &quot;-5.91531&quot; }}' \
https://i-addlocation-tools1.apps.ocp-ai.redhatgov.io/webhook/KcZ3E86SUJTqIUsA8iB7Yb5Sa1KLp9cchnRO5twYnr6UTruYd1
</code></pre></li>

<li><p>Click on <strong>Activity &gt; Refresh</strong> and verify if the newly record is created.</p>

<p><br><img src="../images/17-activity-refresh.png "Activity Refresh" width="900" /><br><br></p></li>

<li><p><em>(Optional)</em> Visit the application URL in the browser from the Location Service created in the previous lab and verify if the record can be fetched.</p></li>
</ol>

<p><strong>RESPONSE</strong></p>

<pre><code>    {
      &quot;id&quot; : 101,
      &quot;name&quot; : &quot;Kamarhati&quot;,
      &quot;type&quot; : &quot;Regional Branch&quot;,
      &quot;status&quot; : &quot;1&quot;,
      &quot;location&quot; : {
        &quot;lat&quot; : &quot;-28.32555&quot;,
        &quot;lng&quot; : &quot;-5.91531&quot;
      }
    }
</code></pre>

<h2 id="summary">Summary</h2>

<p>In this lab you discovered how to create an adhoc API service using Fuse Online.</p>

<h2 id="notes-and-further-reading">Notes and Further Reading</h2>

<ul>
<li>Fuse Online

<ul>
<li><a href="https://www.redhat.com/en/technologies/jboss-middleware/fuse-online">Webpage</a></li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.1/html-single/fuse_online_sample_integration_tutorials/index">Sample tutorials</a></li>
<li><a href="https://developers.redhat.com/blog/2017/11/02/work-done-less-code-fuse-online-tech-preview-today/">Blog</a></li>
</ul></li>
</ul>


    







<nav>
  <ul class="pager">
    
      <li class="previous">
        <a href="http://redhatgov.io/workshops/agile_integrations_ci/lab02/">&larr; Previous: Lab 02 - API Mocking</a>
      </li>
    
    
      <li class="next">
        <a href="http://redhatgov.io/workshops/agile_integrations_ci/lab04/">Next: Lab 04 - Managing API Endpoints &rarr;</a>
      </li>
    
  </ul>
</nav>


    <p class="text-center">
      
      <a href="http://redhatgov.io/workshops/agile_integrations_ci">Return to Workshop</a>
    </p>
  </div>
</div>

    <div id="page-footer" class="container">
      <p class="text-center">
        Copyright &copy; 2019 Red Hat, Inc.
      </p>
    </div>
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
  </body>
</html>

