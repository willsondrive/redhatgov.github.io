<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Exercise 1.5 - Namespaces | Red Hat | Public Sector</title>

    
    
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly.min.css" />
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly-additions.min.css" />

    
    <link rel="stylesheet" href="/node_modules/highlight.js/styles/darkula.css" />

    
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/asciidoc.css" />
    <link rel="stylesheet" href="/css/custom.css" />
    
    <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery/dist/jquery.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/c3/c3.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/d3/d3.min.js"></script>

    
    
    <script src="/node_modules/patternfly/node_modules/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/drmonty-datatables-colvis/js/dataTables.colVis.js"></script>
    <script src="/node_modules/patternfly/node_modules/datatables.net-colreorder/js/dataTables.colReorder.js"></script>

    
    
    <script src="/node_modules/patternfly/dist/js/patternfly.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-combobox/js/bootstrap-combobox.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/moment/min/moment.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

    
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery-match-height/dist/jquery.matchHeight-min.js"></script>
    
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/clip.js"></script>
    
    <script src="/node_modules/highlight.js/lib/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body class="">
    

<nav class="navbar navbar-default navbar-inverse navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        <img src="/img/brand.png" alt="Red Hat | Public Sector" />
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        
          
            <li>
              <a href="/">Home</a>
            </li>
          
        
          
            <li>
              <a href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a href="/contact/">Contact</a>
            </li>
          
        
          
            <li>
              <a href="/events/">Events</a>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Workshops <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/agile_integrations_ci/">Agile Integrations Workshop - Citizen Integrator</a>
                  </li>
                
                  <li>
                    <a href="/workshops/agile_integrations_dev/">Agile Integrations Workshop - Developer</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower/">Ansible Tower Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/ansible_tower_azure/">Ansible Tower Workshop on Azure</a>
                  </li>
                
                  <li>
                    <a href="/workshops/cloudforms41/">CloudForms Workshops</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_containers/">Container Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/containers_101/">Containers 101 Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/secure_software_factory/">DevSecOps Workshop - Secure Software Factory</a>
                  </li>
                
                  <li>
                    <a href="/workshops/example/">Example Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/jdv_dev/">JBoss Data Virtualization Development</a>
                  </li>
                
                  <li>
                    <a href="/workshops/strangling_the_monolith/">Microservices Workshop - Strangling the Monolith</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_101_dcmetromap/">OpenShift 101 - DC Metro Map Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/openshift_install/">OpenShift Install</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_openshift/">OpenShift Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/rhosp_101/">Red Hat OpenStack Platform 101</a>
                  </li>
                
                  <li>
                    <a href="/workshops/source_to_image/">Source to Image</a>
                  </li>
                
              </ul>
            </li>
          
        
      </ul>
    </div>
  </div>
</nav>



<div class="jumbotron jumbotron-page text-center">
  <h1>Exercise 1.5 - Namespaces</h1>
</div>

<div class="container">
  <div class="row">
    <p class="text-center">
      
      <a href="http://redhatgov.io/workshops/security_containers">Return to Workshop</a>
    </p>
    
    







<nav>
  <ul class="pager">
    
      <li class="previous">
        <a href="http://redhatgov.io/workshops/security_containers/exercise1.4/">&larr; Previous: Exercise 1.4 - CGroups</a>
      </li>
    
    
      <li class="next">
        <a href="http://redhatgov.io/workshops/security_containers/exercise1.6/">Next: Exercise 1.6 - Read Only Containers &rarr;</a>
      </li>
    
  </ul>
</nav>


    <div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/workshops/security_containers/images/namespaces.png" alt="namespaces">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercise_1_5_namespaces">Exercise 1.5 - Namespaces</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_exercise_description">Exercise Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise, we will examine how to use namespaces to manage initialization processes, in multiple containers.</p>
</div>
<div class="paragraph">
<p>PID namespaces enable processes in different containers to have the same PID (process identifier). This means each container can have its own init (PID1) process that manages various system initialization tasks, as well as the container life cycle.</p>
</div>
<div class="paragraph">
<p>Also, each container has its unique /proc directory. Note that from within the container, you can only monitor those processes running inside this container. In other words, the container is only aware of its native processes and can not "see" the processes running in different parts of the system. It is the host operating system that is aware of processes running inside of the container, but assigns them different PID numbers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_section_1_launching_a_container">Section 1: Launching a container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Launch a container in it&#8217;s own namespace and see what process it can see from inside the container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run -it redhatgov/alpine ps aux</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse10b5f71423bcb12f7e7c6a5f9f01139f" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapse10b5f71423bcb12f7e7c6a5f9f01139f" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="title">Container processes</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">PID   USER     TIME   COMMAND
  1   root     0:00   ps aux   <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The only process we can see is just our last command <code>ps aux</code>.</td>
</tr>
</table>
</div>

    </div>
  </div>
</div>


</div>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_section_2_enable_namespace_sharing">Section 2: Enable namespace Sharing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Containers can share namespaces with other containers. This has to be explicitly set to enable sharing. To enable namespace sharing we will use the <code>--pid</code> flag to assign the namespace you want to share.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run -it --pid=host redhatgov/alpine ps aux</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse53469cc5ba2675068486e6ec46a20789" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapse53469cc5ba2675068486e6ec46a20789" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="title">Host processes</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">1136 root       0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220
1137 root       0:00 /sbin/agetty --noclear tty1 linux
1320 root       0:00 rhnsd
2993 root       0:00 [kworker/0:1]
3067 root       0:00 [kworker/0:3]
3211 root       0:00 [kworker/u30:0]
3645 vpopmail   0:00 pickup -l -t unix -u
3849 root       0:00 [kworker/0:2]
4056 root       0:00 [kworker/u30:1]
4529 root       0:00 /usr/lib/systemd/systemd-machined
4559 root       0:00 sudo docker run -it --pid=host redhatgov/alpine ps aux
4560 root       0:00 /usr/bin/docker-current run -it --pid=host redhatgov/alpi
4564 root       0:00 /usr/lib/systemd/systemd-udevd
4593 root       0:00 [kdmflush]
4594 root       0:00 [bioset]
4597 root       0:00 [xfs-buf/dm-1]
4598 root       0:00 [xfs-data/dm-1]
4599 root       0:00 [xfs-conv/dm-1]
4600 root       0:00 [xfs-cil/dm-1]
4601 root       0:00 [xfs-reclaim/dm-]
4602 root       0:00 [xfs-log/dm-1]
4603 root       0:00 [xfs-eofblocks/d]
4604 root       0:00 [xfsaild/dm-1]
4605 root       0:00 /usr/lib/systemd/systemd-udevd
4608 root       0:00 /usr/lib/systemd/systemd-udevd
4609 root       0:00 ps aux
10538 root       0:00 /usr/sbin/lvmetad -f
10711 root       0:00 [dm_bufio_cache]
10874 root       1:04 /usr/bin/docker-current daemon --authorization-plugin=rhe
10880 root       0:04 [loop0]
10882 root       0:00 [loop1]
10884 root       0:00 [kdmflush]
10885 root       0:00 [bioset]
10886 root       0:00 [kcopyd]
10887 root       0:00 [bioset]
10888 root       0:00 [dm-thin]
10889 root       0:00 [bioset]
11527 root       0:00 /usr/libexec/docker/rhel-push-plugin
12622 root       0:00 /usr/sbin/crond -n
13170 root       0:03 node /usr/lib/node_modules/wetty/bin/wetty.js --sslkey /h
13193 root       0:00 /usr/sbin/sshd -D
24142 root       0:00 login -- ec2-user
24147 1000       0:00 -zsh
24725 root       0:00 udevadm monitor -u -s block
25323 root       0:00 udevadm monitor -u -s block
25513 root       0:00 udevadm monitor -u -s block
25948 root       0:00 udevadm monitor -u -s block
26095 root       0:00 udevadm monitor -u -s block
26250 root       0:00 udevadm monitor -u -s block
26825 root       0:00 udevadm monitor -u -s block
26915 root       0:00 udevadm monitor -u -s block
27422 root       0:00 udevadm monitor -u -s block
32327 root       0:00 [kworker/0:0]
32644 root       0:00 [kworker/u30:2]</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see we now have access to all of the processes running on host system by using the <code>--pid</code> flag.</p>
</div>

    </div>
  </div>
</div>


</div>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_section_3_network_namespace">Section 3: Network Namespace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Network namespaces provide isolation of network controllers, system resources associated with networking, firewall and routing tables. This allows container to use separate virtual network stack, loopback device and process space. You can add virtual or real devices to the container, assign them their own IP Addresses and even full iptables rules.</p>
</div>
<div class="paragraph">
<p>Network namespaces allow containers to be created with unique IP address and interfaces. Let&#8217;s run a container and examine the default container network interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run -it redhatgov/alpine ip addr show</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsef006917b314f462473e0c75886e27d9d" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapsef006917b314f462473e0c75886e27d9d" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="title">Container network</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1               <i class="conum" data-value="1"></i><b>(1)</b>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
50: eth0@if51: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP  <i class="conum" data-value="2"></i><b>(2)</b>
    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.2/16 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::42:acff:fe11:2/64 scope link tentative
       valid_lft forever preferred_lft forever</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Loopback</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>eth0</td>
</tr>
</table>
</div>

    </div>
  </div>
</div>


</div>

</div>
<div class="paragraph">
<p>By default a container&#8217;s network is isolated with it&#8217;s own IP and interface. By changing the namespace to host by using the <code>--net</code> flag, the process will have access to the host machines network interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run -it --net=host redhatgov/alpine ip addr show</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse23ce3db9feeab2fbf2cb78615178e6fa" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapse23ce3db9feeab2fbf2cb78615178e6fa" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="title">Host network</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1                <i class="conum" data-value="1"></i><b>(1)</b>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9001 qdisc pfifo_fast state UP qlen 1000   <i class="conum" data-value="2"></i><b>(2)</b>
    link/ether 0e:d1:08:25:e2:78 brd ff:ff:ff:ff:ff:ff
    inet 10.0.2.246/24 brd 10.0.2.255 scope global dynamic eth0
       valid_lft 3076sec preferred_lft 3076sec
    inet6 fe80::cd1:8ff:fe25:e278/64 scope link
       valid_lft forever preferred_lft forever
3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN         <i class="conum" data-value="3"></i><b>(3)</b>
    link/ether 02:42:c7:e8:36:fb brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 scope global docker0
       valid_lft forever preferred_lft forever
    inet6 fe80::42:c7ff:fee8:36fb/64 scope link
       valid_lft forever preferred_lft forever</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Loopback</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>eth0</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>docker0</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>--net=container:NAME_or_ID</strong>: Tells Docker to put this container’s processes inside of the network stack that has already been created inside of another container. The new container’s processes will be confined to their own filesystem and process list and resource limits, but will share the same IP address and port numbers as the first container, and processes on the two containers will be able to connect to each other over the loopback interface.</p>
</div>

    </div>
  </div>
</div>


</div>

</div>
<div class="paragraph">



  <div class="alert alert-warning">
    
    <span class="pficon pficon-warning-triangle-o"></span>
    
Note: --net="host" gives the container full access to local system services such as D-bus and is therefore considered insecure.

  </div>


</div>
</div>
</div>
<div class="sect1">
<h2 id="_section_4_sharing_network_namespaces">Section 4: Sharing Network Namespaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Containers have a default security model that enforces isolation at the kernel level for process separation as well as network separation between containers. Sometimes you may need to debug a application or container and need to attach or share a containers namespace. Sharing namespaces should only be done in certain situations that require it, but for development it may be appropriate for debugging.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s examine how we can share the networking namespace between containers. We will launch a nginx container that will bind to port 80 inside it&#8217;s container network interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run -d --name http nginx:alpine</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have the Nginx container running in the background as a daemon (-d) we will launch a second container and see if we can use curl to connect to the Nginx container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run --rm redhatgov/fedora curl -s localhost</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsef9ea03877dbad7004c4ef8302a9d1a7f" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapsef9ea03877dbad7004c4ef8302a9d1a7f" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$</code></pre>
</div>
</div>
<div class="paragraph">
<p>Should return nothing. Because the namespace is not shared.</p>
</div>

    </div>
  </div>
</div>


</div>

</div>
<div class="paragraph">
<p>Now let&#8217;s use the <code>--net=container:</code> flag to attach to the <code>http</code> containers network interface and try the curl command again.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run --rm --net=container:http redhatgov/fedora curl -s localhost</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse891c31456330882e723f940188056a50" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapse891c31456330882e723f940188056a50" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
&lt;style&gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;                               <i class="conum" data-value="1"></i><b>(1)</b>
&lt;p&gt;If you see this page, the nginx web server is
successfully installed and working. Further
configuration is required.&lt;/p&gt;

&lt;p&gt;For online documentation and support please refer to
&lt;a href="http://nginx.org/"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
Commercial support is available at
&lt;a href="http://nginx.com/"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Welcome to nginx! This is the default Nginx message and shows that we were able to share a namespace to connect to this container.</td>
</tr>
</table>
</div>

    </div>
  </div>
</div>


</div>

</div>
<div class="paragraph">
<p>It can also see and interface with the processes in the shared container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo docker run --pid=container:http alpine ps aux</code></pre>
</div>
</div>
<div class="paragraph">
<div class="panel-group">
  

<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsed59d2054ec92cd87cbc1ca3ffe5de118" class="collapsed">
      
        Result
      </a>
    </h4>
  </div>
  
  <div id="collapsed59d2054ec92cd87cbc1ca3ffe5de118" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">PID   USER     TIME   COMMAND
  1   root     0:00   nginx: master process nginx -g daemon off;  <i class="conum" data-value="1"></i><b>(1)</b>
  5   100      0:00   nginx: worker process                       <i class="conum" data-value="2"></i><b>(2)</b>
  6   root     0:00   ps aux</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Nginx master process</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Nginx worker process</td>
</tr>
</table>
</div>

    </div>
  </div>
</div>


</div>

</div>
<div class="paragraph">
<p>This is useful for debugging tools, such as strace. This allows you to give more permissions to certain containers without changing or restarting the application.
<hr>
<h3>Workshop Details</h3>
<div class="row">
  <div class="col-lg-4 col-md-5 col-sm-12" id="workshopFooterDetails">
    <table>
      <tr>
        <td class="text-right"><b>Domain</b></td>
        <td><span class="domain"></span></td>
        <td rowspan="3">
          <img src="https://www.redhat.com/files/brand/email/sig-redhat.png" alt="Red Hat Logo" />
        </td>
      </tr>
      <tr>
        <td class="text-right"><b>Workshop</b></td>
        <td><span class="prefix"></span></td>
      </tr>
      <tr>
        <td class="text-right"><b>Student ID</b></td>
        <td><span class="userid"></span></td>
      </tr>
    </table>
  </div>
  <div class="col-lg-8 col-md-7 col-sm-12">
    <form id="footerForm" onsubmit="return false;" class="row" style="padding: 1.75rem 0 0 0;">
      <div class="form-group col-sm-6 col-md-6 col-lg-2">
        <label for="userid">Student ID</label>
        <select id="userid" name="userid" class="form-control">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
          <option value="32">32</option>
          <option value="33">33</option>
          <option value="34">34</option>
          <option value="35">35</option>
          <option value="36">36</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
          <option value="44">44</option>
          <option value="45">45</option>
          <option value="46">46</option>
          <option value="47">47</option>
          <option value="48">48</option>
          <option value="49">49</option>
          <option value="50">50</option>
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-4">
        <label for="domain">Domain</label>
        <select id="domain" name="domain" class="form-control">
          <option value="redhatgov.io">redhatgov.io</option>
          <option value="az.redhatgov.io">az.redhatgov.io</option>
          <option value="redhat-fierce.io">redhat-fierce.io</option>
          <option value="fiercesw.network">fiercesw.network</option>
          <option value="rhtps.io">rhtps.io</option>
          <option value="openshiftworkshop.com">openshiftworkshop.com</option>          
          <option value="redhatpsmwsa.com">redhatpsmwsa.com</option>          
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <label for="prefix">Workshop</label>
        <input id="prefix" name="prefix" type="text" size="16" class="form-control" placeholder="example" />
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <button type="submit" class="btn btn-primary form-control" style="margin-bottom:1rem;">Enter</button>
        <button type="reset" class="btn btn-default form-control">Default</button>
      </div>
    </form>
  </div>
</div>

<hr>

<script type="text/javascript" src="/node_modules/js-cookie/src/js.cookie.js"></script>
<script type="text/javascript">
<!--
  
  var Cookies2 = Cookies.noConflict();

  var cookiePathArr = cleanArray(window.location.pathname.split('/'));
  var cookiePath = '/' + cookiePathArr[0] + '/' + cookiePathArr[1] + '/';

  function cleanArray(actual) {
    var newArray = new Array();
    for (var i = 0; i < actual.length; i++) {
      if (actual[i]) {
        newArray.push(actual[i]);
      }
    }
    return newArray;
  }
  function replaceClassText() {
    jQuery("span.domain").html(Cookies2.get("domain"));
    jQuery("span.userid").html(Cookies2.get("userid"));
    jQuery("span.prefix").html(Cookies2.get("prefix"));
  }
  function pageLoadWorkshopFooterTest() {
    
    if (Cookies2.get("domain") === undefined) {
      resetWorkshopFooter();
    }
    else {
      replaceClassText();
      setWorkshopFooterInputValues()
    }
  }
  function setWorkshopFooterData() {
    
    Cookies2.set("domain", jQuery("select#domain").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("userid", jQuery("select#userid").val(), { path: cookiePath, expires: 7 } );
    replaceClassText();
  }
  function setWorkshopFooterInputValues() {
    jQuery("select#domain").val(Cookies2.get("domain"));
    jQuery("input#prefix").val(Cookies2.get("prefix"));
    jQuery("select#userid").val(Cookies2.get("userid"));
  }
  function resetWorkshopFooter() {
    
    jQuery("select#domain, select#userid").prop("selectedIndex", 0);
    jQuery("input#prefix").val(jQuery("input#prefix").attr('placeholder'));
    
    Cookies2.set("domain", jQuery("select#domain option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("userid", jQuery("select#userid option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    
    
    replaceClassText();
  }

  jQuery(document).ready(function() {
    pageLoadWorkshopFooterTest();

    jQuery("form#footerForm").submit(function() {
      setWorkshopFooterData();
      return false; 
    });

    jQuery("form#footerForm").bind("reset", function() {
      resetWorkshopFooter();
      return true;
    });

    return false;
  });
-->
</script>

</p>
</div>
</div>
</div>


    







<nav>
  <ul class="pager">
    
      <li class="previous">
        <a href="http://redhatgov.io/workshops/security_containers/exercise1.4/">&larr; Previous: Exercise 1.4 - CGroups</a>
      </li>
    
    
      <li class="next">
        <a href="http://redhatgov.io/workshops/security_containers/exercise1.6/">Next: Exercise 1.6 - Read Only Containers &rarr;</a>
      </li>
    
  </ul>
</nav>


    <p class="text-center">
      
      <a href="http://redhatgov.io/workshops/security_containers">Return to Workshop</a>
    </p>
  </div>
</div>

    <div id="page-footer" class="container">
      <p class="text-center">
        Copyright &copy; 2019 Red Hat, Inc.
      </p>
    </div>
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
  </body>
</html>

